-------------------------------
-- Creación de la tabla USUARIO
-------------------------------
CREATE TABLE USUARIO (
    ID_USUARIO     NUMBER GENERATED BY DEFAULT AS IDENTITY,
    NOMBRE         VARCHAR2(100)    NOT NULL,
    APELLIDO       VARCHAR2(100)    NOT NULL,
    EMAIL          VARCHAR2(150)    NOT NULL UNIQUE,
    PASSWORD       VARCHAR2(256)    NOT NULL,
    FECHA_REGISTRO DATE             DEFAULT SYSDATE,
    CONSTRAINT USUARIO_PK PRIMARY KEY (ID_USUARIO)
);

-------------------------------
-- Creación de la tabla PRODUCTO
-------------------------------
CREATE TABLE PRODUCTO (
    ID_PRODUCTO    NUMBER GENERATED BY DEFAULT AS IDENTITY,
    NOMBRE         VARCHAR2(200)    NOT NULL,
    DESCRIPCION    VARCHAR2(500),
    PRECIO         NUMBER(10,2)     NOT NULL,
    STOCK          NUMBER(10)       NOT NULL,
    IMAGEN_URL     VARCHAR2(500),
    FECHA_CREACION DATE             DEFAULT SYSDATE,
    CONSTRAINT PRODUCTO_PK PRIMARY KEY (ID_PRODUCTO),
    CONSTRAINT CHK_PRODUCTO_PRECIO CHECK (PRECIO > 0),
    CONSTRAINT CHK_PRODUCTO_STOCK CHECK (STOCK >= 0)
);

-------------------------------
-- Creación de la tabla CARRITO
-------------------------------
CREATE TABLE CARRITO (
    ID_CARRITO     NUMBER GENERATED BY DEFAULT AS IDENTITY,
    ID_USUARIO     NUMBER           NOT NULL,
    FECHA_CREACION DATE             DEFAULT SYSDATE,
    CONSTRAINT CARRITO_PK PRIMARY KEY (ID_CARRITO),
    CONSTRAINT FK_CARRITO_USUARIO FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO(ID_USUARIO)
);

------------------------------------
-- Creación de la tabla CARRITO_ITEM
------------------------------------
CREATE TABLE CARRITO_ITEM (
    ID_CARRITO_ITEM NUMBER GENERATED BY DEFAULT AS IDENTITY,
    ID_CARRITO      NUMBER           NOT NULL,
    ID_PRODUCTO     NUMBER           NOT NULL,
    CANTIDAD        NUMBER(5)        NOT NULL,
    PRECIO_UNITARIO NUMBER(10,2)     NOT NULL,
    CONSTRAINT CARRITO_ITEM_PK PRIMARY KEY (ID_CARRITO_ITEM),
    CONSTRAINT FK_CARRITOITEM_CARRITO FOREIGN KEY (ID_CARRITO) REFERENCES CARRITO(ID_CARRITO),
    CONSTRAINT FK_CARRITOITEM_PRODUCTO FOREIGN KEY (ID_PRODUCTO) REFERENCES PRODUCTO(ID_PRODUCTO),
    CONSTRAINT CHK_CARRITO_ITEM_CANTIDAD CHECK (CANTIDAD > 0)
);

-------------------------------
-- Creación de la tabla ORDEN
-------------------------------
CREATE TABLE ORDEN (
    ID_ORDEN    NUMBER GENERATED BY DEFAULT AS IDENTITY,
    ID_USUARIO  NUMBER           NOT NULL,
    FECHA_ORDEN DATE             DEFAULT SYSDATE,
    ESTADO      VARCHAR2(50)     NOT NULL,  -- Ejemplo: 'Pendiente', 'Procesado', 'Enviado'
    TOTAL       NUMBER(10,2)     NOT NULL,
    CONSTRAINT ORDEN_PK PRIMARY KEY (ID_ORDEN),
    CONSTRAINT FK_ORDEN_USUARIO FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO(ID_USUARIO)
);

---------------------------------
-- Creación de la tabla ORDEN_ITEM
---------------------------------
CREATE TABLE ORDEN_ITEM (
    ID_ORDEN_ITEM  NUMBER GENERATED BY DEFAULT AS IDENTITY,
    ID_ORDEN       NUMBER           NOT NULL,
    ID_PRODUCTO    NUMBER           NOT NULL,
    CANTIDAD       NUMBER(5)        NOT NULL,
    PRECIO_UNITARIO NUMBER(10,2)    NOT NULL,
    CONSTRAINT ORDEN_ITEM_PK PRIMARY KEY (ID_ORDEN_ITEM),
    CONSTRAINT FK_ORDENITEM_ORDEN FOREIGN KEY (ID_ORDEN) REFERENCES ORDEN(ID_ORDEN),
    CONSTRAINT FK_ORDENITEM_PRODUCTO FOREIGN KEY (ID